"use strict";function g(){g=function(){};e.Symbol||(e.Symbol=l)}function l(a){return"jscomp_symbol_"+(a||"")+n++}function p(){g();var a=e.Symbol.iterator;a||(a=e.Symbol.iterator=e.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&d(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return q(this)}});p=function(){}}function q(a){var b=0;return r(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function r(a){return p(),a={next:a},a[e.Symbol.iterator]=function(){return this},a}function t(a){p();var b=a[Symbol.iterator];return b?b.call(a):q(a)}function u(a,b){function c(){}var f,h;c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(f in b)Object.defineProperties?(h=Object.getOwnPropertyDescriptor(b,f),h&&Object.defineProperty(a,f,h)):a[f]=b[f]}function C(){this.g=!1;this.a=[];var a=function(a){a=a||window.event;this.g=!0;this.j();a.preventDefault()}.bind(this);this.j=function(){for(var b=t(this.a),c=b.next();!c.done;c=b.next())c.value.removeEventListener("mousemove",a);this.a=[]};this.i=function(b){-1==this.a.indexOf(b)&&(b.addEventListener("mousemove",a),this.a.push(b))}}function D(a,b){if("undefined"!=typeof b){b=t(b);for(var c=b.next();!c.done;c=b.next())a.i(c.value)}}function E(){this.a=[];this.a.push(new F);this.a.push(new G);this.a.push(new H);this.a.push(new I);this.a.push(new J);this.a.push(new K);this.a.push(new L);this.a.push(new M);this.a.push(new N);this.a.push(new O);this.a.push(new P)}function Q(a,b){var c=0,f="",h={},U=performance.now(),k,m;for(a=t(a.a),k=a.next();!k.done;k=a.next()){k=k.value;a:{try{m=k.c();break a}catch(V){console.log(V)}m=void 0}m&&(c+=k.f,f+=k.b+" ")}m=performance.now();h.score=c;h.positiveTests=f.trim();h.totalTime=m-U;b&&b(h)}function R(){if("function"!=typeof this.c)throw new TypeError("Must override Logic method");if("undefined"==typeof this.f)throw new TypeError("Must override Score property");if("undefined"==typeof this.b)throw new TypeError("Must override ID property");}function F(){R.apply(this,arguments)}function G(){R.apply(this,arguments)}function H(){R.apply(this,arguments)}function I(){R.apply(this,arguments)}function J(){R.apply(this,arguments)}function K(){R.apply(this,arguments)}function L(){R.apply(this,arguments)}function M(){R.apply(this,arguments)}function N(){R.apply(this,arguments)}function O(){R.apply(this,arguments)}function P(){R.apply(this,arguments)}function T(a){console.log("new");this.g={};this.h=new E;this.a=new C;D(this.a,a);Q(this.h,function(a){this.g=a}.bind(this))}function S(a,b){return 0===b?a:S(b,a%b)}for(var y,Base,testValue,d="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},e="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,n=0,v=e,w=["Object","assign"],x=0;x<w.length-1;x++)y=w[x],y in v||(v[y]={}),v=v[y];var z=w[w.length-1],A=v[z],B=A?A:function(a){for(var f,h,c=1;c<arguments.length;c++)if(f=arguments[c],f)for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&(a[h]=f[h]);return a};B!=A&&null!=B&&d(v,z,{configurable:!0,writable:!0,value:B});e.Object.defineProperties(C.prototype,{h:{configurable:!0,enumerable:!0,get:function(){return this.g}}});u(F,R);F.prototype.c=function(){return/PhantomJS/i.test(window.navigator.userAgent)};e.Object.defineProperties(F.prototype,{b:{configurable:!0,enumerable:!0,get:function(){return 0}},f:{configurable:!0,enumerable:!0,get:function(){return 100}}});u(G,R);G.prototype.c=function(){return window.callPhantom||window._phantom};e.Object.defineProperties(G.prototype,{b:{configurable:!0,enumerable:!0,get:function(){return 1}},f:{configurable:!0,enumerable:!0,get:function(){return 100}}});u(H,R);H.prototype.c=function(){return!(navigator.plugins instanceof PluginArray)||!navigator.plugins.length};e.Object.defineProperties(H.prototype,{b:{configurable:!0,enumerable:!0,get:function(){return 2}},f:{configurable:!0,enumerable:!0,get:function(){return 50}}});u(I,R);I.prototype.c=function(){return!Function.prototype.bind||Function.prototype.bind.toString().replace(/bind/ig,"Error")!=Error.toString()||!Function.prototype.toString||Function.prototype.toString.toString().replace(/toString/ig,"Error")!=Error.toString()};e.Object.defineProperties(I.prototype,{b:{configurable:!0,enumerable:!0,get:function(){return 3}},f:{configurable:!0,enumerable:!0,get:function(){return 50}}});u(J,R);J.prototype.c=function(){var a={};try{null[0]()}catch(b){a=b}return a=a.stack,-1<("string"==typeof a&&a.indexOf("phantomjs"))};e.Object.defineProperties(J.prototype,{b:{configurable:!0,enumerable:!0,get:function(){return 4}},f:{configurable:!0,enumerable:!0,get:function(){return 100}}});u(K,R);K.prototype.c=function(){var a=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return 800>Math.max(document.documentElement.clientWidth,window.innerWidth||0)||600>a};e.Object.defineProperties(K.prototype,{b:{configurable:!0,enumerable:!0,get:function(){return 5}},f:{configurable:!0,enumerable:!0,get:function(){return 10}}});u(L,R);L.prototype.c=function(){var a=screen.width,b=screen.height,c=S(a,b);return-1===[1.25,1.33,1.6,1.78].indexOf(Math.round(a/c/(b/c)*100)/100)};e.Object.defineProperties(L.prototype,{b:{configurable:!0,enumerable:!0,get:function(){return 6}},f:{configurable:!0,enumerable:!0,get:function(){return 10}}});u(M,R);M.prototype.c=function(){return!window.WebGLRenderingContext};e.Object.defineProperties(M.prototype,{b:{configurable:!0,enumerable:!0,get:function(){return 7}},f:{configurable:!0,enumerable:!0,get:function(){return 20}}});u(N,R);N.prototype.c=function(){return!window.AudioContext};e.Object.defineProperties(N.prototype,{b:{configurable:!0,enumerable:!0,get:function(){return 8}},f:{configurable:!0,enumerable:!0,get:function(){return 20}}});u(O,R);O.prototype.c=function(){return!window.WebSocket};e.Object.defineProperties(O.prototype,{b:{configurable:!0,enumerable:!0,get:function(){return 9}},f:{configurable:!0,enumerable:!0,get:function(){return 20}}});u(P,R);P.prototype.c=function(){return!window.File};e.Object.defineProperties(P.prototype,{b:{configurable:!0,enumerable:!0,get:function(){return 10}},f:{configurable:!0,enumerable:!0,get:function(){return 20}}});T.prototype.i=function(){return this.a?Object.assign({},this.g,{active:this.a.h}):this.g};window.GB=T;T.prototype.getResults=T.prototype.i;Base=new function(){function initUserId(){var uid=void 0;return Cookies.get("uid")?uid=Cookies.get("uid"):(uid=parsedPgData.uid?parsedPgData.uid:GenerateGUID(),Cookies.set("uid",uid,{path:"/",domain:conf.domain,expires:7120})),uid}function GenerateGUID(){function s(n){return h(Math.random()*(1<<(n<<2))^Date.now()).slice(-n)}function h(n){return(n|0).toString(16)}return[s(4)+s(4),s(4),"4"+s(3),h(8|Math.random()*4)+s(3),Date.now().toString(16).slice(-10)+s(2)].join("-")}function changeLocale(co){var language,languageTexts,_iterator,_step,key,$indexId;if(typeof localization_text!="undefined"){if(language=mapping[co.toLowerCase()]||mapping[co.toUpperCase()],languageTexts=localization_text[language],!co||!language)return;var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=undefined;try{for(_iterator=Object.keys(languageTexts)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)key=_step.value,$indexId=$("#"+key),$indexId.html(languageTexts[key]),languageTexts.rtl&&($indexId.css({direction:"rtl","text-align":"right"}),$(".can-rtl").addClass("rtl"))}catch(err){_didIteratorError=!0;_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError;}}}}function changeBrowserReferences(currentBrowser){currentBrowser||(currentBrowser=Browsers.Chrome);isChrome()||$(".chrome-store-logo").hide();$(".has-browser-name").map(function(i,element){var $element=$(element),newText=$element.html().replace(/#BrowserName#/g,currentBrowser);$element.html(newText)});$(".browser-specific-image").map(function(i,element){var $element=$(element),oldSrc=$element.attr("src"),newSrc=oldSrc.replace(/Chrome/g,currentBrowser);$element.attr("src",newSrc);$element.on("error",function(){return $element.attr("src",oldSrc)})})}function redirectToStore(reason){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=undefined,_iterator2,_step2,handler;try{for(_iterator2=EventHandlers.redirectToStore[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){handler=_step2.value;try{handler(reason)}catch(e){console.error(e)}}}catch(err){_didIteratorError2=!0;_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2;}}Base.NetworkUtils.sendPixel({type:"redirectostore",data3:clickid,data4:reason,data10:sessionId,data16:window.pgSegment||0},function(){return window.location="https://chrome.google.com/webstore/detail/"+extensionid})}function handleNoInlineInstall(url){var onMouseDown,reb,diff,newWindow,b,a,c;if(!document.getElementById("message-box")){onMouseDown=function onMouseDown(){try{document.body.removeChild(a)}catch(e){console.log("arrow error",e)}$("#message-box #close").click(function(){try{document.body.removeChild(b)}catch(e){}window.removeEventListener("mousedown",onMouseDown);window.removeEventListener("resize",onMouseDown);document.getElementById("message-box").style.display="none";c=clearInterval(c)});$("#message-box #accept").click(function(){var dualScreenLeft=window.screenLeft!=undefined?window.screenLeft:window.screenX,dualScreenTop=window.screenTop!=undefined?window.screenTop:window.screenY;a.style.left=oldCWSLeft-(window.outerWidth-window.innerWidth)/2-dualScreenLeft+927+20+"px";a.style.top=oldCWSTop-(window.outerHeight-window.innerHeight)-dualScreenTop+10+"px";newWindow=window.open(url,"window","scrollbars=no, width=927, height=612, top="+top+", left="+left);cwswindowclosed=!1;document.getElementById("message-box").style.display="none";document.body.appendChild(a)});document.getElementById("message-box").style.display="block"};reb=document.createElement("div");reb.id="message-box";reb.style.display="none";reb.innerHTML='<div class="container" style="text-align: center; font: 12px Arial, Helvetica, sans-serif; color: #000; margin: auto;"><div class="wrapper" style="position: fixed; top: 50% !important; left: 50% !important; margin-top: -80px !important; width: 360px !important; margin-left: -180px !important; z-index: 1004;"><div class="content" style="left: 0px; top: 0px; background-color: #eeeeee; border: 2px solid #bbbbbb; width: 360px; height: 161px;"><div class="confirm-window-error-img"><\/div><div class="question" style="position: absolute; top: 30px; left: 25px; color: #0F4ABD; font-family: Arial !important; font-size: 16px !important; font-weight: normal !important; font-style: normal !important; text-align: left !important;">Are you sure you want to<br>cancel the installation?<br><\/div><div id="buttons"><div class="button-container" style="position: absolute; top: 110px; left: 165px; font-family: Arial; font-size: 13px; font-weight: normal; font-style: normal; width: 80px; height: 25px; overflow: hidden; text-wrap: none; text-align: center; cursor: pointer; padding: 0; margin: 0;"><input type="button" style="width: 80px; height: 25px;" id="close" name="close" value="Yes"><\/div><div class="button-container" style="position: absolute; top: 110px; left: 260px; font-family: Arial; font-size: 13px; font-weight: normal; font-style: normal; width: 80px; height: 25px; overflow: hidden; text-wrap: none; text-align: center; cursor: pointer; padding: 0; margin: 0;"><input type="button" style="width: 80px; height: 25px;" id="accept" name="accept" value="No"><\/div><\/div><\/div><\/div><\/div>';document.body.appendChild(reb);var cwswindowclosed=!0,oldCWSLeft,oldCWSTop,dualScreenLeft=window.screenLeft!=undefined?window.screenLeft:window.screenX,dualScreenTop=window.screenTop!=undefined?window.screenTop:window.screenY,width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,left=width/2-927/2+(window.outerWidth-window.innerWidth)/2+dualScreenLeft,top=height/2-306+window.outerHeight-window.innerHeight+dualScreenTop,arrowLeft,arrowTop;cwswindowclosed?(arrowLeft=width/2-927/2+927+20,arrowTop=height/2-296,arrowLeft+397>width&&(diff=arrowLeft-(width-397),arrowLeft=width-397,left-=diff),arrowTop<0&&(diff=-arrowTop,arrowTop=0,top+=diff),oldCWSLeft=left,oldCWSTop=top):(typeof oldCWSLeft=="undefined"&&(oldCWSLeft=left),typeof oldCWSTop=="undefined"&&(oldCWSTop=top),arrowLeft=oldCWSLeft-(window.outerWidth-window.innerWidth)/2-dualScreenLeft+927+20,arrowTop=oldCWSTop-(window.outerHeight-window.innerHeight)-dualScreenTop+10);newWindow=window.open(url,"window","scrollbars=no, width=927, height=612, top="+top+", left="+left);cwswindowclosed=!1;document.body.style.overflow="hidden";b=document.createElement("div");b.style.position="fixed";b.style.left="0";b.style.top="0";b.style.width="100%";b.style.height="100%";b.style.backgroundColor="#000000";b.style.opacity="0.6";a=document.createElement("div");a.className="arrow-ni";a.style.left=arrowLeft+"px";a.style.top=arrowTop+"px";a.style.zIndex=9999;a.innerHTML="<span>Add to Chrome<\/span>";document.body.appendChild(a);document.body.appendChild(b);window.addEventListener("mousedown",onMouseDown);window.addEventListener("resize",onMouseDown);c=setInterval(function(){newWindow.closed&&(cwswindowclosed=!0,window.removeEventListener("mousedown",onMouseDown),window.removeEventListener("resize",onMouseDown),c=clearInterval(c),onMouseDown())},200)}}function handleSecondOffer(){if(window.soDomain&&window.soDomain.indexOf("#")===-1){var data=Base.EnvironmentData.getPageData(),url="//"+soDomain+"/?pid="+data.pid+"&subid="+data.sid+"&clickid="+data.clickid+"&did="+data.uid;setTimeout(function(){window.location=url},100)}}function handlePadding(num,places){var zero=places-num.toString().length+1;return new Array(zero>0&&zero).join("0")+num}function confirmInstall(){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=undefined,_iterator3,_step3,handler,index,queryString;try{for(_iterator3=EventHandlers.confirmInstall[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){handler=_step3.value;try{handler()}catch(e){console.error(e)}}}catch(err){_didIteratorError3=!0;_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3;}}var url=window.location.href,pixelUrl="//"+window.location.host+"/ConfirmInstall?pid="+pid+"&subid="+sid+"&clickid="+clickid+"&barcodeid="+barcode+"&entityname="+entityname+"&deviceid="+uid+"&installdate="+installDate+"&did="+uid,keyArr=Base.QueryStringUtils.parseQueryString(pixelUrl);for(index=0;index<keyArr.length;index++)url=removeParameterFromUrl(url,keyArr[index]);if(queryString="",url.indexOf("?")>-1&&(queryString=url.split("?")[1]),queryString&&queryString!==""&&(pixelUrl=pixelUrl+"&"+queryString),co&&co.indexOf("#")===-1&&(pixelUrl+="&co="+co),Base.NetworkUtils.GET(pixelUrl),window.onInstallSuccess)window.onInstallSuccess(Base.NetworkUtils.GET)}function removeParameterFromUrl(url,parameter){return url.replace(new RegExp("[?&]"+parameter+"=[^&#]*(#.*)?$"),"$1").replace(new RegExp("([?&])"+parameter+"=[^&]*&"),"$1")}function handleIframe(){Base.NetworkUtils.sendPixel({type:"failreason",data1:conf.page_title+" "+creativenumber,data2:"page_in_iframe",data3:clickid,data10:sessionId,data16:window.pgSegment||0});Base.NetworkUtils.callGA(pid,conf.page_title+" "+creativenumber,"page_in_iframe");validpage=!1;setTimeout(function(){try{window.top.location.href=window.self.location.href.replace("&pgs=1","")+"&if=true"}catch(e){}},0);document.addEventListener("click",function(){try{window.top.location.href=window.self.location.href.replace("&pgs=1","")+"&if=true"}catch(e){}})}function handleFullscreen(){Base.NetworkUtils.sendPixel({type:"failreason",data1:conf.page_title+" "+creativenumber,data2:"fullscreen",data3:clickid,data10:sessionId,data16:window.pgSegment||0});document.exitFullscreen?(document.exitFullscreen(),setTimeout(function(){return handleUserFullscreen()},0)):document.webkitCancelFullScreen?(document.webkitCancelFullScreen(),setTimeout(function(){return handleUserFullscreen()},0)):handleUserFullscreen()}function handleUserFullscreen(){setTimeout(function(){Base.EnvironmentData.isFullScreen()?validpage=!1:Base.NetworkUtils.sendPixel({type:"cancelfullscreen",data1:conf.page_title+" "+creativenumber,data3:clickid,data10:sessionId,data16:window.pgSegment||0})},0)}function validatePage(){if(Base.EnvironmentData.isFullScreen()&&(Base.NetworkUtils.sendPixel({type:"invalidpage",data1:conf.page_title+" "+creativenumber,data3:clickid,date4:"fullscreen",data10:sessionId}),Base.NetworkUtils.callGA(pid,conf.page_title+" "+creativenumber,"invalidpage"),handleFullscreen()),isChrome()&&Base.EnvironmentData.testPopup(),!conf.debug)try{Base.EnvironmentData.isIframe()&&handleIframe()}catch(e){handleIframe()}isFirefox()||isChrome()||isSafari()||(Base.NetworkUtils.sendPixel({type:"failreason",data1:conf.page_title+" "+creativenumber,data2:"unsupported_browser",data3:clickid,data10:sessionId,data16:window.pgSegment||0}),Base.NetworkUtils.callGA(pid,conf.page_title+" "+creativenumber,"unsupported_browser "),validpage=!1);validpage||(Base.NetworkUtils.sendPixel({type:"invalidpage",data1:conf.page_title+" "+creativenumber,data3:clickid,date4:"testfailed",data10:sessionId,data16:window.pgSegment||0}),Base.NetworkUtils.callGA(pid,conf.page_title+" "+creativenumber,"invalidpage"))}function populateHowToList(){var _iterator4,_step4,itemText;if($(".how-to-modal").length!==0&&conf.howTos&&Array.isArray(conf.howTos)){var $howToList=$(".how-to-list"),_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=undefined;try{for(_iterator4=conf.howTos[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0)itemText=_step4.value,$howToList.append($('<li class="how-to-list-item">'+itemText+"<\/li>"))}catch(err){_didIteratorError4=!0;_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4;}}}}function handlePageLoad(){extensionid==="##AppIdKey##"&&(extensionid="no-app-id");$(".popwindow-control").hide();$("title").text(conf.page_title);$("#page_title").text(conf.page_title);$("#description_title").text(conf.description_title);$("#description_html").html(conf.description_html);$("#agreement_html").html(conf.agreement_html);populateHowToList();Base.QueryStringUtils.initStatArgs();var data=Base.EnvironmentData.getData(),status=reloaded?"reload":"load";Base.NetworkUtils.sendPixel({type:"page"+status,data1:conf.page_title+" "+creativenumber,data2:currentBrowser,data3:clickid,data4:screen.width+"x"+screen.height,data5:$(window).width()+"x"+$(window).height(),data6:window.opener!==null?1:0,data7:navigator.hardwareConcurrency||-1,data8:window.devicePixelRatio||-1,data9:navigator.language||-1,data10:sessionId,data11:data.browser,data12:data.majorVersion,data13:data.os,data14:data.osVersion,data15:extensionid,data16:window.pgSegment||0,data17:encodeURIComponent(referrersite)});Base.NetworkUtils.callGA(pid,conf.page_title+" "+creativenumber,status);validatePage();setTimeout(function(){var results=gb_detect.getResults();results.score>=20&&(gb_detect_decision=results.score<=70?"Suspicious":"Detected",Base.NetworkUtils.sendPixel({type:"gb_detected",data1:gb_detect_decision,data2:results.positiveTests,data3:clickid,data4:results.score,data5:results.totalTime,data10:sessionId,data16:window.pgSegment||0}))},100)}function registerLandingPageCookie(){var domain=conf.domain;Cookies.set("pid",pid,{path:"/",domain:domain,expires:1});Cookies.set("sid",sid,{path:"/",domain:domain,expires:1});Cookies.set("clickid",clickid,{path:"/",domain:domain,expires:1});Cookies.set("insdt",installDate,{path:"/",domain:domain,expires:1});Cookies.set("en",entityname,{path:"/",domain:domain,expires:1});typeof type!="undefined"&&Cookies.set("type",type,{path:"/",domain:domain,expires:1});typeof pgSTO!="undefined"&&Cookies.set("pgSTO",pgSTO,{path:"/",domain:domain,expires:1});typeof pgSTT!="undefined"&&Cookies.set("pgSTT",pgSTT,{path:"/",domain:domain,expires:1});Cookies.set("lpDetails",JSON.stringify({creativeDetails:conf.page_title+" "+creativenumber,browser:currentBrowser,gbDecision:gb_detect_decision,gbResult:gb_detect.getResults().active,testValue:testValue?testValue:"",soDomain:window.soDomain&&window.soDomain.indexOf("#")===-1?soDomain:"",sessionId:sessionId,pgSegment:window.pgSegment||0}),{path:"/",domain:domain,expires:1})}var _this=this,Browsers={Chrome:"Chrome",Firefox:"Firefox",Safari:"Safari"},EventHandlers={redirectToStore:[],installAccept:[],installCancelled:[],confirmInstall:[],installBtnClick:[]},isFirefox=function(){return typeof InstallTrigger!="undefined"},isChrome=function(){return!!window.chrome&&!!window.chrome.webstore},isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},entityname=conf.entityname,sessionId=GenerateGUID(),gb_detect=new GB(document.querySelectorAll(".AddToBrowser")),browser=function(){return isSafari()?Browsers.Safari:isFirefox()?Browsers.Firefox:Browsers.Chrome}(),chromeInstallText="<span class='install-text-big'>Click 'Add Extension'<\/span><br><span class='install-small-text'>This will add the "+conf.page_title+" extension to<br>your browser and you're done.<\/span>",fireFoxInstallText="<span class='install-text-big'>Click 'Allow' to begin<\/span><br><span class='install-small-text'>Clicking 'Install' thereafter will add the<br>"+conf.page_title+"<br>your browser and you're done.<\/span>",safariInstallText="<span class='install-text-safari'>Almost done!<\/span><span class='install-small-safari'>Go to your Downloads folder and click on<br>"+conf.page_title+" to add the extension to<br>your browser and you're done.<\/span>",pid=conf.default_pid,sid=conf.default_sid,barcode=pid+sid,referrersite="none",clickid=conf.default_clickid,parsedPgData={};try{parsedPgData=JSON.parse(pgData)}catch(e){}var uid=initUserId(),validpage=!0,reloaded=!1,gb_detect_decision="",storeLinkTagStatus="no-tag",installInProgress=!1,observer=void 0,installDate=function(){var d=new Date,yyyy=d.getFullYear().toString(),mm=(d.getMonth()+1).toString(),dd=d.getDate().toString();return(dd[1]?dd:"0"+dd[0])+"-"+(mm[1]?mm:"0"+mm[0])+"-"+yyyy}(),$addToBrowser=void 0,$overlay=void 0,$arrowContainer=void 0,$installText=void 0,$cancelConfirmationDialog=void 0,$yesButton=void 0,$noButton=void 0,$howToModal=void 0,$howToInstallButton=void 0,$howToLink=void 0,$howToClose=void 0,$storeRedirectPanel=void 0,$extensionButton=void 0;_this.registerEventListener=function(eventName,callback){EventHandlers[eventName]&&typeof callback=="function"?EventHandlers[eventName].push(callback):console.error("No handler for event type",eventName)};_this.EnvironmentData={getBrowser:function(){return browser},getPageData:function(){return{barcode:barcode,entityname:entityname,pid:pid,sid:sid,uid:uid,clickid:clickid}},getData:function(){var nVer=navigator.appVersion,nAgt=navigator.userAgent,browser=navigator.appName,version=""+parseFloat(nVer),majorVersion=parseInt(nVer,10),nameOffset=void 0,verOffset=void 0,ix=void 0,os,clientStrings,id,cs,osVersion;(verOffset=nAgt.indexOf("Opera"))!==-1&&(browser="Opera",version=nAgt.substring(verOffset+6),(verOffset=nAgt.indexOf("Version"))!==-1&&(version=nAgt.substring(verOffset+8)));(verOffset=nAgt.indexOf("OPR"))!==-1?(browser="Opera",version=nAgt.substring(verOffset+4)):(verOffset=nAgt.indexOf("Edge"))!==-1?(browser="Microsoft Edge",version=nAgt.substring(verOffset+5)):(verOffset=nAgt.indexOf("MSIE"))!==-1?(browser="Microsoft Internet Explorer",version=nAgt.substring(verOffset+5)):(verOffset=nAgt.indexOf("Chrome"))!==-1?(browser="Chrome",version=nAgt.substring(verOffset+7)):(verOffset=nAgt.indexOf("Safari"))!==-1?(browser="Safari",version=nAgt.substring(verOffset+7),(verOffset=nAgt.indexOf("Version"))!==-1&&(version=nAgt.substring(verOffset+8))):(verOffset=nAgt.indexOf("Firefox"))!==-1?(browser="Firefox",version=nAgt.substring(verOffset+8)):nAgt.indexOf("Trident/")!==-1?(browser="Microsoft Internet Explorer",version=nAgt.substring(nAgt.indexOf("rv:")+3)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(browser=nAgt.substring(nameOffset,verOffset),version=nAgt.substring(verOffset+1),browser.toLowerCase()===browser.toUpperCase()&&(browser=navigator.appName));(ix=version.indexOf(";"))!==-1&&(version=version.substring(0,ix));(ix=version.indexOf(" "))!==-1&&(version=version.substring(0,ix));(ix=version.indexOf(")"))!==-1&&(version=version.substring(0,ix));majorVersion=parseInt(""+version,10);isNaN(majorVersion)&&(version=""+parseFloat(nVer),majorVersion=parseInt(nVer,10));os="Unknown";clientStrings=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(id in clientStrings)if(cs=clientStrings[id],cs.r.test(nAgt)){os=cs.s;break}osVersion="Unknown";/Windows/.test(os)&&(osVersion=/Windows (.*)/.exec(os)[1],os="Windows");switch(os){case"Mac OS X":osVersion=/Mac OS X (10[\.\_\d]+)/.exec(nAgt)[1];break;case"Android":osVersion=/Android ([\.\_\d]+)/.exec(nAgt)[1];break;case"iOS":osVersion=/OS (\d+)_(\d+)_?(\d+)?/.exec(nVer);osVersion=osVersion[1]+"."+osVersion[2]+"."+(osVersion[3]|0)}return{browser:browser,version:version,majorVersion:majorVersion,os:os,osVersion:osVersion}},isFullScreen:function(){return screen.height-window.innerHeight<10},isIframe:function(){return window.self!==window.top},testPopup:function(){var hasOpener=void 0,resizeWorks=void 0,hasToolbar=window.toolbar.visible,hasLocationbar=window.locationbar.visible,originalSize;hasOpener=window.opener!==null;originalSize={height:window.outerHeight,width:window.outerWidth};window.resizeTo(window.outerWidth+1,window.outerHeight+1);resizeWorks=window.outerWidth-originalSize.width>0||window.outerHeight-originalSize.height>0;Base.NetworkUtils.sendPixel({type:"pageData",data3:window.outerWidth+"-"+window.outerHeight,data4:window.innerWidth+"-"+window.innerHeight,data5:screen.width+"-"+screen.height,data6:hasOpener,data7:hasToolbar,data8:hasLocationbar,data9:resizeWorks,data10:sessionId,data11:navigator.hardwareConcurrency||-1,data12:window.devicePixelRatio||-1,data13:screen.colorDepth||-1,data16:window.pgSegment||0})}};_this.NetworkUtils={GET:function(url,callback){var xhr=new XMLHttpRequest;xhr.open("GET",url,!0);callback&&(xhr.onreadystatechange=function(){xhr.readyState===4&&callback(xhr.responseText)});xhr.send()},GETWithCredentials:function(url,callback){var xhr=new XMLHttpRequest;xhr.open("GET",url,!0);xhr.withCredentials=!0;callback&&(xhr.onreadystatechange=function(){xhr.readyState===4&&callback(xhr.responseText)});xhr.send()},POST:function(url,data,contentType,callback){var xhr=new XMLHttpRequest;xhr&&"withCredentials"in xhr&&(xhr.open("POST",url,!0),xhr.setRequestHeader("Content-type",contentType),callback&&(xhr.onreadystatechange=function(res){xhr.readyState===XMLHttpRequest.DONE&&xhr.status===200&&callback(xhr,res)}),xhr.send(data))},sendPixel:function(params,callback){var url,paramsString,finalUrl;conf.debug||(url="//px.keepmypixel.com/pixel.aspx?name="+entityname+"&entity=26&barcode="+barcode+"&userid="+uid+"&installdate="+installDate,paramsString="",$.each(params,function(key,value){return paramsString+="&"+key+"="+value}),finalUrl=url+paramsString,co&&co.indexOf("#")===-1&&(finalUrl+="&co="+co),Base.NetworkUtils.GET(finalUrl,callback))},registerUserData:function(){registerLandingPageCookie();try{var url="//"+window.location.host+"/registerdata",xhr=new XMLHttpRequest,json=JSON.stringify({pid:pid,sid:sid,uid:uid,clickid:clickid});xhr.open("POST",url,!0);xhr.setRequestHeader("Content-Type","application/json; charset=utf-8");xhr.send(json)}catch(e){console.error(e)}},callGA:function(eventCategory,eventAction,eventLabel){window.ga&&ga.loaded&&ga("send","event",eventCategory,eventAction,eventLabel)}};_this.QueryStringUtils={initStatArgs:function(){var paramPid,paramsubid;if(Base.QueryStringUtils.getParameterByName("pid")!==""&&(paramPid=Base.QueryStringUtils.getParameterByName("pid"),pid=handlePadding(paramPid.replace(/[^0-9]/g,"").substr(0,5),5)),Base.QueryStringUtils.getParameterByName("subid")!==""?(paramsubid=Base.QueryStringUtils.getParameterByName("subid"),sid=handlePadding(paramsubid.replace(/[^0-9]/g,"").substr(0,10),10)):Cookies.get("subid")&&(sid=Cookies.get("subid")),Base.QueryStringUtils.getParameterByName("clickid")!==""?clickid=Base.QueryStringUtils.getParameterByName("clickid"):Cookies.get("clickid")&&(clickid=Cookies.get("clickid")),Base.QueryStringUtils.getParameterByName("if")==="true"&&(reloaded=!0),pid===conf.default_pid&&parsedPgData.pid&&(pid=parsedPgData.pid,sid=parsedPgData.sid),barcode=pid+sid,"referrer"in document)try{referrersite=document.referrer}catch(e){}},getParameterByName:function(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search);return results===null?"":decodeURIComponent(results[1].replace(/\+/g," "))},parseQueryString:function(url){var query=url.split("?")[1],map=[];return query.replace(/([^&=]+)=?([^&]*)(?:&+|$)/g,function(match,key){return map.push(key)}),map}};_this.UI={showOverlay:function(){$overlay.show();$arrowContainer.show();$installText.show();isFirefox()&&setTimeout(function(){return Base.UI.hideOverlay()},5e3)},hideOverlay:function(){$overlay.hide();$arrowContainer.hide();$installText.hide()},showCancelConfirmtion:function(){$overlay.show();$cancelConfirmationDialog.show()},hideCancelConfirmation:function(){$overlay.hide();$cancelConfirmationDialog.hide()}};_this.handleOffer=function(){return handleSecondOffer()};_this.installAccept=function(){var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=undefined,_iterator5,_step5,handler;try{for(_iterator5=EventHandlers.installAccept[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){handler=_step5.value;try{handler()}catch(e){console.error(e)}}}catch(err){_didIteratorError5=!0;_iteratorError5=err}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5;}}Base.NetworkUtils.sendPixel({type:"InstallSuccess",data1:conf.page_title+" "+creativenumber,data2:currentBrowser,data3:clickid,data4:gb_detect_decision,data5:gb_detect.getResults().active,data6:extensionid,data7:testValue?testValue:"",data9:window.soDomain&&window.soDomain.indexOf("#")===-1?soDomain:"",data10:sessionId,data16:window.pgSegment||0});Base.NetworkUtils.callGA(pid,conf.page_title+" "+creativenumber,"install success");confirmInstall();$addToBrowser.unbind("click");$(".popwindow-control").hide();installInProgress=!1;Base.UI.hideOverlay();handleSecondOffer()};_this.installCancelled=function(error){var _iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=undefined,_iterator6,_step6,handler;try{for(_iterator6=EventHandlers.installCancelled[Symbol.iterator]();!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){handler=_step6.value;try{handler(error)}catch(e){console.error(e)}}}catch(err){_didIteratorError6=!0;_iteratorError6=err}finally{try{!_iteratorNormalCompletion6&&_iterator6.return&&_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6;}}Base.UI.hideOverlay();installInProgress=!1;$(".popwindow-control").hide();$cancelConfirmationDialog.length>0?($cancelConfirmationDialog.data.error=error,Base.UI.showCancelConfirmtion()):(Base.NetworkUtils.sendPixel({type:"InstallCancelled",data1:conf.page_title+" "+creativenumber,data2:encodeURIComponent(error),data3:clickid,data4:gb_detect_decision,data5:gb_detect.getResults().active,data6:extensionid,data10:sessionId,data16:window.pgSegment||0}),Base.NetworkUtils.callGA(pid,conf.page_title+" "+creativenumber,"install cancelled"));error==="Inline installs can not be initiated from pop-up windows."&&($addToBrowser.unbind("click"),redirectToStore("Popup"));error==="Could not fetch data from the Chrome Web Store"&&($addToBrowser.unbind("click"),redirectToStore("Could_not_fetch_data"))};_this.installAttempt=function(){var _iterator7,_step7,handler,xpi,target,config,_target,_config;if(isChrome()&&Base.EnvironmentData.isFullScreen()&&handleFullscreen(),document.getElementById("extInstalled")||document.getElementById(extensionid)||isChrome()&&chrome.app.isInstalled)alert("It looks like this extension is already installed in your browser");else if(validpage!==!1&&$storeRedirectPanel.length<1){Base.NetworkUtils.registerUserData();$(".popwindow-control").fadeIn(300);Base.NetworkUtils.callGA(pid,conf.page_title+" "+creativenumber,"install attempt");Base.NetworkUtils.sendPixel({type:"InstallAttempt",data1:conf.page_title+" "+creativenumber,data3:clickid,date4:gb_detect_decision,data5:gb_detect.getResults().active,data6:extensionid,data10:sessionId,data16:window.pgSegment||0});try{window.history.pushState("","","/")}catch(e){}var _iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=undefined;try{for(_iterator7=EventHandlers.installBtnClick[Symbol.iterator]();!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){handler=_step7.value;try{handler()}catch(e){console.error(e)}}}catch(err){_didIteratorError7=!0;_iteratorError7=err}finally{try{!_iteratorNormalCompletion7&&_iterator7.return&&_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7;}}try{isFirefox()?(Base.UI.showOverlay(),xpi={XPInstall:typeof xpiUrl!="undefined"?xpiUrl:conf.xpi_url},InstallTrigger.install(xpi,function(){}),target=document.body,config={childList:!0,characterData:!0},observer.observe(target,config)):isSafari()?($overlay.show(),$(".install-safari-container").show(),setTimeout(function(){window.location=typeof safariUrl!="undefined"?safariUrl:conf.safariextz_url},100),setTimeout(function(){$overlay.hide();$(".install-safari-container").hide()},1e4),_target=document.body,_config={childList:!0,characterData:!0},observer.observe(_target,_config)):isChrome()&&($("link[rel^='chrome-webstore-item']").length<1?redirectToStore(storeLinkTagStatus):window.inlineDisabled?handleNoInlineInstall("https://chrome.google.com/webstore/detail/"+extensionid):window.storeRedirect?window.location="https://chrome.google.com/webstore/detail/"+extensionid:(Base.UI.showOverlay(),installInProgress===!1&&(installInProgress=!0,chrome.webstore.install("https://chrome.google.com/webstore/detail/"+extensionid,_this.installAccept,_this.installCancelled))))}catch(err){_this.installCancelled(err)}}else isChrome()?$storeRedirectPanel.length>0?($storeRedirectPanel.show(),$overlay.show(),setTimeout(function(){return redirectToStore("hasredirectpanel")},3500)):redirectToStore("invalidpage"):(isFirefox()||isSafari())&&alert("Cannot install the extension from an iframe.")};_this.init=function(){$addToBrowser=$(".AddToBrowser");$overlay=$(".install-arrow-overlay");$arrowContainer=$(".install-arrow-container");$installText=$(".install-text-container");$cancelConfirmationDialog=$(".cancel-confirmation-dialog");$yesButton=$(".yes-button");$noButton=$(".no-button");$howToModal=$(".how-to-modal");$howToInstallButton=$(".how-to-install-button");$howToLink=$(".how-to-link");$howToClose=$(".how-to-close");$storeRedirectPanel=$(".store-redirect-panel");$extensionButton=$(".extension-btn");(isFirefox()||isSafari())&&(observer=new MutationObserver(function(mutations){mutations.forEach(function(){$("#extInstalled")&&(observer.disconnect(),_this.installAccept())})}));isFirefox()?$installText.html(fireFoxInstallText):isSafari()?($installText.html(safariInstallText),$(".install-text-safari-container").html(safariInstallText),$extensionButton.addClass("safari-button")):isChrome&&$installText.html(chromeInstallText);changeLocale(window.co);changeBrowserReferences(browser);handlePageLoad();$addToBrowser.click(function(e){e.preventDefault();_this.installAttempt()});$addToBrowser.mouseenter(function(e){e.preventDefault();isChrome()?gb_detect_decision==="Detected"?storeLinkTagStatus="gbdetection":document.getElementById("extInstalled")?storeLinkTagStatus="extensioninstalled":$("link[rel^='chrome-webstore-item']").length>0?storeLinkTagStatus="tagalreadyexists":$('<link rel="chrome-webstore-item" href="https://chrome.google.com/webstore/detail/'+extensionid+'">').appendTo($(document.head)):storeLinkTagStatus="invalidbrowser"});$yesButton.click(function(e){var error=$cancelConfirmationDialog.data.error?$cancelConfirmationDialog.data.error:"User cancelled install";e.preventDefault();Base.UI.hideCancelConfirmation();Base.NetworkUtils.sendPixel({type:"InstallCancelled",data1:conf.page_title+" "+creativenumber,data2:encodeURIComponent(error),data3:clickid,data4:gb_detect_decision,data5:gb_detect.getResults().active,data6:extensionid,data10:sessionId,data16:window.pgSegment||0});Base.NetworkUtils.callGA(pid,conf.page_title+" "+creativenumber,"install cancelled");$cancelConfirmationDialog.data.error=""});$noButton.click(function(e){e.preventDefault();Base.UI.hideCancelConfirmation();_this.installAttempt()});$howToInstallButton.click(function(){return $howToModal.hide()});$howToLink.click(function(){$overlay.show();$howToModal.show()});$howToClose.click(function(){$howToModal.hide();$overlay.hide()})}};testValue="none";$(document).ready(function(){Base.init()})